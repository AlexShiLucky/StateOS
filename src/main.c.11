#include <stm32f4_discovery.h>
#include <os.h>

OS_MTX(mtx, mtxPriorityInheritance);

OS_DEF(mas, 2)
{
	mtx_wait(mtx);
	LED[3] = 1;
	mtx_give(mtx);

	LED[2] = 1;
	for (;;); // BREAKPOINT: 1
}

OS_DEF(sla, 1)
{
	tsk_start(mas);

	LED[1] = 1;
	for (;;); // BREAKPOINT: 2
}

int main()
{
	LED_Config();
	
	mtx_wait(mtx);
	tsk_start(sla);
	mtx_give(mtx);

	LED[0] = 1;
	for (;;); // BREAKPOINT: 3
}
