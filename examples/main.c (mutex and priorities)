#include <stm32f4_discovery.h>
#include <os.h>

OS_MTX(mtx);

OS_DEF(mas, 2)
{
	mtx_wait(mtx);
	mtx_give(mtx);

	LEDG = 1;
	for (;;); // BREAKPOINT: 1
}

OS_DEF(sla, 1)
{
	tsk_start(mas);

	LEDR = 1;
	for (;;); // BREAKPOINT: 2
}

int main()
{
	LED_Config();
	
	mtx_wait(mtx);
	tsk_start(sla);
	mtx_give(mtx);

	LEDB = 1;
	for (;;); // BREAKPOINT: 3
}
